<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <button>CLICK ME</button>
  </body>

  <script>
    window.onload = () => {
      document.querySelector("button").addEventListener("click", (event) => {
        // const url = "http://localhost:8080/api/employees"
        const url = "http://localhost:8080/basic";

        // const username = "user";
        const username = "employee";
        const password = "root";
        // const password = "c6ead863-7a0b-4a5f-9112-bdf87a821997";

        // const basicAuth = btoa(`${username}:${password}`);
        const basicAuth = `${username}:${password}`;
        const headers = new Headers({
          "Content-Type": "application/json",
          Authorization: `Basic ${basicAuth}`,
        });

        const requestOptions = {
          method: "GET",
          headers: headers,
          credentials: "include", // If necessary for cross-origin requests with credentials
          // mode: "no-cors", // no-cors, *cors, same-origin
        };

        fetch(url, requestOptions)
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .then((data) => {
            console.log(data);
          })
          .catch((error) => {
            console.error(
              "There was a problem with the fetch operation:",
              error
            );
          });
      });

      document.querySelector("button").click();
    };
  </script>
</html>
